graph TD
    subgraph GOAL [Projet Archon]
        A(Forger l'environnement Hyprland parfait)
    end

    subgraph ACTORS [Acteurs]
        ARCHITECT["üë®‚Äçüíª Architecte (Sidix)<br/><i>D√©finit, pratique, verbalise</i>"]
        SPARRING["ü§ñ Sparring Partner (Gemini)<br/><i>Guide, valide, synth√©tise</i>"]
    end

    subgraph QUEST_FRAMING [Phase A: Planification ‚Äî Quest Framing Cycle]
        direction TB
        Q1(1. D√©claration d'Intention) --> Q2(2. D√©construction des Concepts)
        Q2 --> Q3(3. D√©finition de la Qu√™te<br/><i>Objectif clair & mesurable</i>)
    end

    subgraph WORKFLOW [Phase B: Ex√©cution ‚Äî Workflow Cycle]
        direction TB
        W1["1. Exploration & Pratique<br/><i>(Mains sur le clavier)</i>"] --> W2["2. Capitalisation<br/><i>(G√©n√©ration de la Fiche)</i>"]
        W2 --> W3["3. Validation Finale<br/><i>(D√©fi Inverse)</i>"]
        W3 --> W4["4. D√©briefing M√©ta-Cognitif<br/><i>(Analyse du Journal)</i>"]
        W4 --> W5["5. Mise √† jour de la Ma√Ætrise<br/><i>(Mise √† jour de l'Arbre)</i>"]
    end

    subgraph TRIGGERS [Protocoles Sp√©ciaux ‚Äî Learning Triggers]
        T1{Le√ßon de l'Erreur}
        T2{Sparring Spontan√©}
        T3{Synth√®se Dynamique}
    end

    subgraph TOOLS [Outils & Artefacts]
        JDB(["üìù Journal de Bord<br/>(Input/Output de l'Architecte)"])
        FR[("üìö Fiche R√©capitulative<br/>(Livrable de Capitalisation)")]
        AC[("üå≥ Arbre de Comp√©tences<br/>(Carte de la Ma√Ætrise)")]
    end

    %% --- FLUX PRINCIPAL ---
    ARCHITECT -- "Initie le cycle avec une..." --> Q1
    Q3 -- "Lance la..." --> W1
    W5 -- "Boucle sur une..." --> Q1

    %% --- INTERACTIONS & D√âCLENCHEURS ---
    W1 -- "Interaction constante" --> ARCHITECT
    W1 -- "Interaction constante" --> SPARRING
    W1 -. "Peut d√©clencher √† tout moment les..." .-> T1
    W1 -.-> T2
    W1 -.-> T3

    %% --- FLUX DE DONN√âES (OUTILS & LIVRABLES) ---
    ARCHITECT -- "Tient √† jour son..." --> JDB
    JDB -- "Sert de base pour le..." --> W4
    W2 -- "Produit la..." --> FR
    W5 -- "Met √† jour l'..." --> AC

    %% --- STYLING ---
    classDef goal fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px,color:#1b5e20
    classDef actor fill:#e1f5fe,stroke:#0277bd,stroke-width:2px,color:#01579b
    classDef quest fill:#f3e5f5,stroke:#6a1b9a,stroke-width:2px,color:#4a148c
    classDef workflow fill:#e8eaf6,stroke:#303f9f,stroke-width:2px,color:#1a237e
    classDef trigger fill:#fff3e0,stroke:#ef6c00,stroke-width:2px,color:#e65100
    classDef tool fill:#f5f5f5,stroke:#616161,stroke-width:2px,color:#212121

    class A goal
    class ARCHITECT,SPARRING actor
    class Q1,Q2,Q3 quest
    class W1,W2,W3,W4,W5 workflow
    class T1,T2,T3 trigger
    class JDB,FR,AC tool
